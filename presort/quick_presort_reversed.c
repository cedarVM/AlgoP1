#include <stdlib.h>
#include <stdio.h>
#include <time.h>
/*
 * Author: Matthew Louden
 *
 * Date: January 30th 2025
 *
 * Description: Performs quicksort on integers valued 0-4095
 * in batches of increments of 5 for 2000 iterations. The timing
 * mechanism for this algorithm is possibly unoptimally implemented.
 * A simple delta is taken from the start of the sort function till
 * its end. Overhead logic for getting samples is not considered,
 * however.
 *
 * In order for the in-place algorithm to work, the most convenient
 * pivot is chosen at the end of the sample. Unfortunately, this means
 * any logic attempting to make the pivot, say, the beginning of the
 * sample would be a nightmare, disbarring a hack found in quick.0.c
 *
 * */

int median(int size) {
return size/2;
}

int last(int size) {
return size - 1;
}

int begin(int size) {
return 0;
}

void sort(int *arr, int *ins, int n, int func(int)) {

int pivot = arr[func(n)];

int first, last, temp;
int bottom_l, top_l;

first = 0;
last = n - 2;

  while (last > first) {
    if (arr[first] > pivot && arr[last] < pivot) {
    temp = arr[first];
    arr[first] = arr[last];
    arr[last]  = temp;
    last--;
    first++;
    }
    if (arr[last]  >= pivot) {
    last--;
    }
    if (arr[first] <= pivot) {
    first++;
    }

  }

  if (arr[last] < pivot) {
  last++;
  }

  bottom_l = last;
  top_l = n - last - 1;

  //printf("%d %d\n", bottom_l, top_l);
  //fgetc(stdin);


  ins[bottom_l] = pivot;

  if (bottom_l == 1) {
    ins[0] = arr[0];
  } else if (bottom_l == 0) {
    ;
  } else {
    sort(arr, ins, bottom_l, func); // bottom
  }

  if (top_l == 1) {
    ins[bottom_l + 1] = arr[bottom_l];
  } else if (top_l == 0) {
    ;
  } else {
    sort(arr + last, ins + last + 1, top_l, func); // top
  }

}

int main(int arg, char **argv) {

srand(time(0));

int SIZE = 700;

int arr[700] = { 
3994,
3991,
3947,
3942,
3941,
3933,
3932,
3930,
3922,
3917,
3913,
3911,
3910,
3909,
3907,
3904,
3899,
3896,
3892,
3888,
3884,
3877,
3874,
3866,
3853,
3848,
3846,
3844,
3838,
3835,
3833,
3831,
3830,
3829,
3828,
3825,
3819,
3815,
3812,
3799,
3795,
3788,
3784,
3782,
3781,
3774,
3772,
3767,
3761,
3760,
3758,
3754,
3751,
3747,
3746,
3744,
3740,
3738,
3724,
3722,
3715,
3710,
3709,
3707,
3700,
3699,
3697,
3691,
3689,
3673,
3664,
3657,
3644,
3643,
3640,
3637,
3631,
3626,
3625,
3618,
3611,
3610,
3603,
3597,
3596,
3594,
3588,
3576,
3571,
3568,
3561,
3559,
3550,
3540,
3539,
3537,
3528,
3521,
3519,
3517,
3511,
3503,
3491,
3490,
3487,
3485,
3475,
3474,
3469,
3460,
3458,
3449,
3440,
3434,
3430,
3423,
3418,
3417,
3392,
3386,
3383,
3380,
3372,
3370,
3361,
3360,
3333,
3316,
3312,
3304,
3301,
3296,
3293,
3290,
3285,
3279,
3274,
3271,
3264,
3259,
3250,
3242,
3241,
3234,
3233,
3231,
3225,
3223,
3221,
3216,
3215,
3214,
3211,
3207,
3200,
3194,
3174,
3173,
3166,
3158,
3155,
3153,
3152,
3150,
3143,
3127,
3098,
3095,
3077,
3073,
3067,
3066,
3060,
3049,
3046,
3045,
3042,
3038,
3035,
3023,
3017,
3004,
2997,
2992,
2990,
2987,
2984,
2982,
2977,
2971,
2958,
2953,
2951,
2950,
2949,
2947,
2946,
2944,
2943,
2935,
2928,
2925,
2924,
2923,
2915,
2910,
2908,
2897,
2884,
2880,
2878,
2876,
2874,
2873,
2870,
2866,
2858,
2851,
2849,
2841,
2837,
2835,
2830,
2823,
2819,
2812,
2807,
2806,
2772,
2766,
2763,
2756,
2754,
2711,
2708,
2705,
2693,
2686,
2682,
2662,
2659,
2652,
2648,
2645,
2639,
2634,
2633,
2631,
2629,
2626,
2623,
2619,
2616,
2607,
2599,
2593,
2591,
2577,
2555,
2552,
2548,
2546,
2545,
2543,
2539,
2534,
2529,
2524,
2519,
2513,
2512,
2509,
2503,
2492,
2491,
2487,
2485,
2470,
2464,
2451,
2434,
2433,
2425,
2422,
2417,
2416,
2410,
2397,
2395,
2385,
2371,
2356,
2354,
2348,
2347,
2341,
2337,
2335,
2317,
2313,
2311,
2309,
2291,
2285,
2284,
2274,
2270,
2258,
2240,
2234,
2228,
2220,
2209,
2207,
2201,
2193,
2191,
2182,
2176,
2175,
2158,
2153,
2152,
2147,
2144,
2141,
2136,
2127,
2125,
2123,
2109,
2105,
2103,
2100,
2090,
2080,
2075,
2072,
2068,
2064,
2058,
2047,
2046,
2038,
2036,
2026,
2023,
2019,
2006,
2001,
1998,
1997,
1990,
1985,
1975,
1974,
1970,
1964,
1957,
1951,
1949,
1941,
1939,
1932,
1931,
1923,
1921,
1920,
1916,
1904,
1898,
1890,
1889,
1880,
1872,
1869,
1868,
1864,
1863,
1862,
1861,
1856,
1855,
1850,
1846,
1845,
1837,
1830,
1825,
1822,
1811,
1807,
1796,
1794,
1784,
1780,
1776,
1767,
1766,
1762,
1755,
1754,
1748,
1740,
1729,
1726,
1722,
1708,
1697,
1695,
1692,
1691,
1689,
1683,
1682,
1675,
1665,
1658,
1653,
1649,
1645,
1639,
1630,
1621,
1617,
1616,
1615,
1607,
1599,
1598,
1582,
1578,
1564,
1541,
1535,
1524,
1517,
1509,
1507,
1503,
1495,
1490,
1489,
1484,
1480,
1477,
1470,
1459,
1446,
1443,
1433,
1421,
1419,
1411,
1406,
1403,
1400,
1395,
1392,
1388,
1384,
1383,
1380,
1371,
1369,
1357,
1342,
1331,
1295,
1287,
1286,
1276,
1267,
1263,
1262,
1260,
1257,
1255,
1246,
1245,
1238,
1236,
1234,
1227,
1214,
1213,
1204,
1197,
1184,
1178,
1164,
1160,
1159,
1144,
1139,
1136,
1135,
1132,
1125,
1124,
1119,
1115,
1112,
1105,
1101,
1091,
1081,
1077,
1067,
1066,
1063,
1055,
1051,
1043,
1041,
1039,
1036,
1035,
1022,
1020,
1014,
995,
986,
983,
975,
974,
970,
969,
965,
955,
952,
951,
943,
942,
939,
934,
925,
924,
914,
909,
896,
895,
893,
892,
890,
889,
883,
871,
864,
855,
852,
850,
844,
838,
835,
834,
833,
827,
822,
816,
815,
801,
781,
767,
765,
763,
761,
744,
733,
724,
722,
721,
710,
707,
705,
704,
699,
691,
682,
680,
674,
673,
670,
665,
662,
656,
652,
647,
644,
641,
640,
637,
632,
626,
622,
606,
605,
597,
591,
582,
567,
564,
553,
551,
548,
547,
544,
537,
529,
517,
511,
496,
485,
476,
474,
473,
470,
463,
459,
457,
456,
454,
447,
444,
432,
430,
421,
410,
407,
401,
400,
395,
379,
378,
375,
365,
364,
358,
356,
342,
339,
338,
319,
303,
293,
290,
277,
274,
273,
270,
267,
264,
263,
261,
258,
256,
252,
233,
225,
195,
190,
185,
182,
175,
173,
167,
166,
165,
162,
161,
158,
155,
146,
145,
144,
141,
136,
133,
127,
124,
121,
116,
101,
98,
97,
93,
91,
85,
82,
68,
45,
43,
27,
26,
24,
20,
15,
7,
6,
1
};

int *sorted = malloc(SIZE * 4);

  clock_t init, end;

  init = clock();
  sort(arr, sorted, SIZE, last);
  end = clock();

  printf("%d\n", end - init);

}



