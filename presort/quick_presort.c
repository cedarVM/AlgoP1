#include <stdlib.h>
#include <stdio.h>
#include <time.h>
/*
 * Author: Matthew Louden
 *
 * Date: January 30th 2025
 *
 * Description: Performs quicksort on integers valued 0-4095
 * in batches of increments of 5 for 2000 iterations. The timing
 * mechanism for this algorithm is possibly unoptimally implemented.
 * A simple delta is taken from the start of the sort function till
 * its end. Overhead logic for getting samples is not considered,
 * however.
 *
 * In order for the in-place algorithm to work, the most convenient
 * pivot is chosen at the end of the sample. Unfortunately, this means
 * any logic attempting to make the pivot, say, the beginning of the
 * sample would be a nightmare, disbarring a hack found in quick.0.c
 *
 * */

int median(int size) {
return size/2;
}

int last(int size) {
return size - 1;
}

int begin(int size) {
return 0;
}

void sort(int *arr, int *ins, int n, int func(int)) {

int pivot = arr[func(n)];

int first, last, temp;
int bottom_l, top_l;

first = 0;
last = n - 2;

  while (last > first) {
    if (arr[first] > pivot && arr[last] < pivot) {
    temp = arr[first];
    arr[first] = arr[last];
    arr[last]  = temp;
    last--;
    first++;
    }
    if (arr[last]  >= pivot) {
    last--;
    }
    if (arr[first] <= pivot) {
    first++;
    }

  }

  if (arr[last] < pivot) {
  last++;
  }

  bottom_l = last;
  top_l = n - last - 1;

  //printf("%d %d\n", bottom_l, top_l);
  //fgetc(stdin);


  ins[bottom_l] = pivot;

  if (bottom_l == 1) {
    ins[0] = arr[0];
  } else if (bottom_l == 0) {
    ;
  } else {
    sort(arr, ins, bottom_l, func); // bottom
  }

  if (top_l == 1) {
    ins[bottom_l + 1] = arr[bottom_l];
  } else if (top_l == 0) {
    ;
  } else {
    sort(arr + last, ins + last + 1, top_l, func); // top
  }

}

int main(int arg, char **argv) {

srand(time(0));

int SIZE = 700;

int arr[700] = { 
1,
6,
7,
15,
20,
24,
26,
27,
43,
45,
68,
82,
85,
91,
93,
97,
98,
101,
116,
121,
124,
127,
133,
136,
141,
144,
145,
146,
155,
158,
161,
162,
165,
166,
167,
173,
175,
182,
185,
190,
195,
225,
233,
252,
256,
258,
261,
263,
264,
267,
270,
273,
274,
277,
290,
293,
303,
319,
338,
339,
342,
356,
358,
364,
365,
375,
378,
379,
395,
400,
401,
407,
410,
421,
430,
432,
444,
447,
454,
456,
457,
459,
463,
470,
473,
474,
476,
485,
496,
511,
517,
529,
537,
544,
547,
548,
551,
553,
564,
567,
582,
591,
597,
605,
606,
622,
626,
632,
637,
640,
641,
644,
647,
652,
656,
662,
665,
670,
673,
674,
680,
682,
691,
699,
704,
705,
707,
710,
721,
722,
724,
733,
744,
761,
763,
765,
767,
781,
801,
815,
816,
822,
827,
833,
834,
835,
838,
844,
850,
852,
855,
864,
871,
883,
889,
890,
892,
893,
895,
896,
909,
914,
924,
925,
934,
939,
942,
943,
951,
952,
955,
965,
969,
970,
974,
975,
983,
986,
995,
1014,
1020,
1022,
1035,
1036,
1039,
1041,
1043,
1051,
1055,
1063,
1066,
1067,
1077,
1081,
1091,
1101,
1105,
1112,
1115,
1119,
1124,
1125,
1132,
1135,
1136,
1139,
1144,
1159,
1160,
1164,
1178,
1184,
1197,
1204,
1213,
1214,
1227,
1234,
1236,
1238,
1245,
1246,
1255,
1257,
1260,
1262,
1263,
1267,
1276,
1286,
1287,
1295,
1331,
1342,
1357,
1369,
1371,
1380,
1383,
1384,
1388,
1392,
1395,
1400,
1403,
1406,
1411,
1419,
1421,
1433,
1443,
1446,
1459,
1470,
1477,
1480,
1484,
1489,
1490,
1495,
1503,
1507,
1509,
1517,
1524,
1535,
1541,
1564,
1578,
1582,
1598,
1599,
1607,
1615,
1616,
1617,
1621,
1630,
1639,
1645,
1649,
1653,
1658,
1665,
1675,
1682,
1683,
1689,
1691,
1692,
1695,
1697,
1708,
1722,
1726,
1729,
1740,
1748,
1754,
1755,
1762,
1766,
1767,
1776,
1780,
1784,
1794,
1796,
1807,
1811,
1822,
1825,
1830,
1837,
1845,
1846,
1850,
1855,
1856,
1861,
1862,
1863,
1864,
1868,
1869,
1872,
1880,
1889,
1890,
1898,
1904,
1916,
1920,
1921,
1923,
1931,
1932,
1939,
1941,
1949,
1951,
1957,
1964,
1970,
1974,
1975,
1985,
1990,
1997,
1998,
2001,
2006,
2019,
2023,
2026,
2036,
2038,
2046,
2047,
2058,
2064,
2068,
2072,
2075,
2080,
2090,
2100,
2103,
2105,
2109,
2123,
2125,
2127,
2136,
2141,
2144,
2147,
2152,
2153,
2158,
2175,
2176,
2182,
2191,
2193,
2201,
2207,
2209,
2220,
2228,
2234,
2240,
2258,
2270,
2274,
2284,
2285,
2291,
2309,
2311,
2313,
2317,
2335,
2337,
2341,
2347,
2348,
2354,
2356,
2371,
2385,
2395,
2397,
2410,
2416,
2417,
2422,
2425,
2433,
2434,
2451,
2464,
2470,
2485,
2487,
2491,
2492,
2503,
2509,
2512,
2513,
2519,
2524,
2529,
2534,
2539,
2543,
2545,
2546,
2548,
2552,
2555,
2577,
2591,
2593,
2599,
2607,
2616,
2619,
2623,
2626,
2629,
2631,
2633,
2634,
2639,
2645,
2648,
2652,
2659,
2662,
2682,
2686,
2693,
2705,
2708,
2711,
2754,
2756,
2763,
2766,
2772,
2806,
2807,
2812,
2819,
2823,
2830,
2835,
2837,
2841,
2849,
2851,
2858,
2866,
2870,
2873,
2874,
2876,
2878,
2880,
2884,
2897,
2908,
2910,
2915,
2923,
2924,
2925,
2928,
2935,
2943,
2944,
2946,
2947,
2949,
2950,
2951,
2953,
2958,
2971,
2977,
2982,
2984,
2987,
2990,
2992,
2997,
3004,
3017,
3023,
3035,
3038,
3042,
3045,
3046,
3049,
3060,
3066,
3067,
3073,
3077,
3095,
3098,
3127,
3143,
3150,
3152,
3153,
3155,
3158,
3166,
3173,
3174,
3194,
3200,
3207,
3211,
3214,
3215,
3216,
3221,
3223,
3225,
3231,
3233,
3234,
3241,
3242,
3250,
3259,
3264,
3271,
3274,
3279,
3285,
3290,
3293,
3296,
3301,
3304,
3312,
3316,
3333,
3360,
3361,
3370,
3372,
3380,
3383,
3386,
3392,
3417,
3418,
3423,
3430,
3434,
3440,
3449,
3458,
3460,
3469,
3474,
3475,
3485,
3487,
3490,
3491,
3503,
3511,
3517,
3519,
3521,
3528,
3537,
3539,
3540,
3550,
3559,
3561,
3568,
3571,
3576,
3588,
3594,
3596,
3597,
3603,
3610,
3611,
3618,
3625,
3626,
3631,
3637,
3640,
3643,
3644,
3657,
3664,
3673,
3689,
3691,
3697,
3699,
3700,
3707,
3709,
3710,
3715,
3722,
3724,
3738,
3740,
3744,
3746,
3747,
3751,
3754,
3758,
3760,
3761,
3767,
3772,
3774,
3781,
3782,
3784,
3788,
3795,
3799,
3812,
3815,
3819,
3825,
3828,
3829,
3830,
3831,
3833,
3835,
3838,
3844,
3846,
3848,
3853,
3866,
3874,
3877,
3884,
3888,
3892,
3896,
3899,
3904,
3907,
3909,
3910,
3911,
3913,
3917,
3922,
3930,
3932,
3933,
3941,
3942,
3947,
3991,
3994
};

int *sorted = malloc(SIZE * 4);

  clock_t init, end;

  init = clock();
  sort(arr, sorted, SIZE, last);
  end = clock();

  printf("%d\n", end - init);

}


